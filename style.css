:root {
  /* "vivid" / legacy vars */
  --vivid-background: #fffff8;
  --vivid-foreground: #000;
  --dull-background:  #f0f0f0;
  --dull-foreground:  #666;
  --accent:           #2a623d;
  --race-background:  #8b0000;
  --slowdown-background: #2a623d;
}

:root {
  /* HSL design‑token system (as shipped on ai‑2027) */
  --background:           0 0% 100%;    /* hsl var() syntax */
  --foreground:           0 0%  3.9%;
  --card:                 0 0% 100%;
  --card-foreground:      0 0%  3.9%;
  --popover:              0 0% 100%;
  --popover-foreground:   0 0%  3.9%;
  --primary:              0 0%  9%;
  --primary-foreground:   0 0% 98%;
  --secondary:            0 0% 96.1%;
  --secondary-foreground: 0 0%  9%;
  --muted:                0 0% 96.1%;
  --muted-foreground:     0 0% 45.1%;
  --accent:               0 0% 96.1%;  /* note: duplicated name in source */
  --accent-foreground:    0 0%  9%;
  --destructive:          0 84.2% 60.2%;
  --destructive-foreground: 0 0% 98%;
  --border:               0 0% 89.8%;
  --input:                0 0% 89.8%;
  --ring:                 0 0%  3.9%;
  /* chart palette */
  --chart-1: 12 76% 61%;
  --chart-2: 173 58% 39%;
  --chart-3: 197 37% 24%;
  --chart-4: 43 74% 66%;
  --chart-5: 27 87% 67%;
  /* radius */
  --radius: 0.5rem;
}

/* ---------------------------------------------------------------------
   1. TYPE & GLOBAL RESET  (exact font / spacing config)
   ------------------------------------------------------------------ */

/* ai‑2027 uses et‑book (Matthew Butterick) as primary serif */
@font-face {
  font-family: "et-book";
  src: local("et-book"), local("ETBook");
  font-display: swap;
}

body, .font {
  font-family: et-book, Palatino, "Palatino Linotype", "Palatino LT STD", "Book Antiqua", Georgia, serif;
}

html {
  font-size: 15px;          /* identical */
  line-height: 1.5;         /* identical */
  -webkit-text-size-adjust: 100%;
  -moz-tab-size: 4;
  tab-size: 4;
  font-feature-settings: normal;
  font-variation-settings: normal;
  -webkit-tap-highlight-color: transparent;
}

body {
  margin: 0;
  line-height: inherit;     /* ai‑2027 keeps it to inherit html line‑height */
  background-color: hsl(var(--background)); /* overrides vivid‑background */
  color: hsl(var(--foreground));
  counter-reset: sidenote-counter;          /* ai‑2027 footnote style */
  counter-reset: katexEqnNo mmlEqnNo;       /* math numbering */
}

/* smoothing helpers (ai‑2027) */
body.antialiased          { -webkit-font-smoothing: subpixel-antialiased; }
.antialiased               { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* Tailwind‑like utility mirrored exactly */
.mb-16 { margin-bottom: 4rem; }

/* universal box / border setup */
*, *::before, *::after {
  box-sizing: border-box;
  border: 0 solid hsl(var(--border));
  --tw-border-spacing-x: 0;
  --tw-border-spacing-y: 0;
  --tw-translate-x: 0;
  --tw-translate-y: 0;
  --tw-rotate: 0;
  --tw-skew-x: 0;
  --tw-skew-y: 0;
  --tw-scale-x: 1;
  --tw-scale-y: 1;
  --tw-ring-inset: ;
  --tw-ring-offset-width: 0px;
  --tw-ring-offset-color: #fff;
  --tw-ring-color: rgba(59, 130, 246, .5);
  --tw-ring-offset-shadow: 0 0 #0000;
  --tw-ring-shadow: 0 0 #0000;
  --tw-shadow: 0 0 #0000;
  --tw-shadow-colored: 0 0 #0000;
  /* many more --tw-* props exist in source but left blank intentionally */
}

/* ---------------------------------------------------------------------
   2. YOUR ORIGINAL LAYOUT SELECTORS – recoloured via tokens
   ------------------------------------------------------------------ */

/* Fade‑in keyframes kept (not present on ai‑2027 but harmless) */
@keyframes fadein { from { opacity: 0; } to { opacity: 1; } }

#menu {
  position: fixed;
  top: 3vh;
  left: 3vw;
  width: 94vw;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  background: hsl(var(--background) / 0.9); /* translucent card */
  border-bottom: 1px solid hsl(var(--border));
  backdrop-filter: blur(8px);
  z-index: 1000;
}

#title-container   { position: relative; display: inline-block; white-space: nowrap; }
#title-link        { position: relative; display: block; text-decoration: none; color: inherit; }
#title-text        { font-size: 1.3rem; letter-spacing: 0.07em; font-weight: 700; }
#title-logo        { position: absolute; inset: 0; width: 120px; height: auto; opacity: 0; transition: opacity .3s; }

#menu ul           { display: flex; gap: 20px; list-style: none; margin: 0; padding: 0; }
#menu li a         { color: hsl(var(--primary)); text-decoration: none; font-weight: 500; }
#menu li a:hover   { text-decoration: underline; color: hsl(var(--chart-1)); }

/* MAIN CONTENT */
#main      { margin: 20vh auto 0 auto; width: min(65vw,800px); }
#photo     { width: 200px; float: left; padding: 2em; }
.comment   { margin-top: 0; font-size: 0.875rem; color: hsl(var(--muted-foreground)); }

/* Indent color‑bars mapped to ai‑2027 chart palette */
.indent_1 { border-left: 6px solid hsl(var(--chart-2)); }
.indent_2 { border-left: 6px solid hsl(var(--chart-3)); }
.indent_3 { border-left: 6px solid hsl(var(--chart-4)); }
.indent_4 { border-left: 6px solid hsl(var(--chart-5)); }

.indent_1, .indent_2, .indent_3, .indent_4 {
  margin-left: 1vw; margin-top: -.7em; padding: .3em 1em; background: hsl(var(--muted)); border-radius: 0 var(--radius) var(--radius) 0;
}

/* Links */
a          { color: hsl(var(--primary)); }
a:hover    { color: hsl(var(--chart-1)); }

/* Headings */
h3, h4     { margin-top: 0; font-weight: 700; }

/* PROJECT CARD */
.project {
  margin-bottom: 2rem;
  padding-left: 1rem;
  border-left: 4px solid hsl(var(--border));
  background: hsl(var(--card));
  border-radius: var(--radius);
  box-shadow: 0 3px 6px rgba(0,0,0,.04);
}
.project h3 { font-size: 1.2rem; margin-bottom: 0.5em; }

/* ---------------------------------------------------------------------
   3. RESPONSIVE MEDIA QUERIES  (untouched)
   ------------------------------------------------------------------ */
@media (max-width: 800px) {
  #menu         { flex-direction: column; align-items: flex-start; width: auto; top: 2vh; left: 4vw; padding: .8rem 0; }
  #title-logo   { width: 90px; }
  #main         { margin-top: 12vh; width: 88vw; }
  #photo        { width: 100%; float: none; padding: 2em 0; }
}
